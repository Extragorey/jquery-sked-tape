/* ==========================================================================
 * Default settings
 * ==========================================================================

// general
$skedtape-use-sticky-header: false !default

// dimensions
$skedtape-hour-column-width: 96px !default
$skedtape-hour-row-height: 24px !default
$skedtape-entry-row-height: 54px !default
$skedtape-dates-height: 24px !default

// colors & decoration
$skedtape-grid-color: #E5E5E5 !default
$skedtape-grid: 1px solid $skedtape-grid-color !default
$skedtape-row-header-padding: 15px !default
$skedtape-row-header-color: #EFEFEF !default
$skedtape-legend-row-separator: 1px solid white !default
$skedtape-entry-row-separator: none !default
$skedtape-row-header-gap: 5px solid transparent !default
$skedtape-row-uneven-color: #FDFDFD !default
$skedtape-row-even-color: #F4F4F4 !default
$skedtape-entry-color: #EC6A5E !default
$skedtape-entry-color-hover: darken($skedtape-entry-color, 10%) !default
$skedtape-entry-border: 1px solid darken($skedtape-entry-color, 15%) !default
$skedtape-entry-padding: 10px !default
$skedtape-background-color: white !default

/* ==========================================================================
 * SkedTape
 * ==========================================================================

.sked-tape
	display: flex
	align-items: stretch
	width: 100%
	max-width: 100%
	box-sizing: border-box

	*
		box-sizing: inherit

	ul
		list-style-type: none
		margin: 0

	ul, li
		margin: 0
		padding: 0
		list-style-type: none

	&__aside
		flex: none
		max-width: 30%
		padding: 0 !important
		border-right: $skedtape-row-header-gap
		position: relative
		li
			padding: 0 $skedtape-row-header-padding
			background-color: $skedtape-row-header-color
			line-height: $skedtape-entry-row-height
			height: $skedtape-entry-row-height

			&:not(:last-of-type)
				border-bottom: $skedtape-legend-row-separator
			
			> span
				display: inline-block
				max-width: 100%
				overflow: hidden
				text-overflow: ellipsis
				white-space: nowrap
				word-wrap: normal

	&__caption
		display: block
		background-color: $skedtape-background-color
		height: $skedtape-hour-row-height
		position: if($skedtape-use-sticky-header, sticky, relative)
		top: 0
		text-align: center
		@at-root .sked-tape--has-dates &
			height: $skedtape-hour-row-height + $skedtape-dates-height
			line-height: $skedtape-hour-row-height + $skedtape-dates-height

	&__time-wrap
		flex: 3 0 auto
		width: 0
		padding: 0 !important

	&__time-frame
		display: block
		width: 100%
		overflow-x: auto
		-webkit-overflow-scrolling: touch
		&:focus
			outline: none
	
	&__time-canvas
		position: relative

	&__hours
		background: $skedtape-background-color
		transform-style: preserve-3d

		> ul
			display: flex
			height: $skedtape-hour-row-height
			align-items: center

			> li
				flex: none
				display: block
				position: relative
				min-width: $skedtape-hour-column-width
				width: $skedtape-hour-column-width
				height: $skedtape-hour-row-height
				line-height: $skedtape-hour-row-height

				> time
					display: block
					position: absolute
					left: 0
					font-size: 13px
					white-space: nowrap
				&:not(:first-child) > time
					transform: translateX(-50%)
				&:last-child
					width: 0
					min-width: 0
					> time
						transform: translateX(-100%)

	&__timeline-wrap
		position: relative

	&__timeline
		width: 100%
		border-left: none
		display: flex
		flex-direction: column
		align-items: stretch


		> li
			position: relative
			background-color: $skedtape-row-even-color
			height: $skedtape-entry-row-height
			&:nth-child(odd)
				background-color: $skedtape-row-uneven-color
			&:first-child
				border-top: $skedtape-grid
			&:last-child
				border-bottom: $skedtape-grid
			&:not(:last-child)
				border-bottom: $skedtape-entry-row-separator
	
	&__gap
		display: block
		height: $skedtape-entry-row-height - 1px
		line-height: $skedtape-entry-row-height - 1px
		position: absolute
		z-index: 3
		text-align: center
		white-space: nowrap
		overflow: hidden
		font-size: 12px
		pointer-events: none

	&__event
		background-color: $skedtape-entry-color
		transition: 200ms background-color
		height: $skedtape-entry-row-height - 1px
		display: block
		position: absolute
		z-index: 3
		white-space: nowrap
		overflow: hidden
		font-size: 12px
		color: white
		border: $skedtape-entry-border
		transform-style: preserve-3d
		min-width: 10px
		cursor: default
		&:hover
			background-color: $skedtape-entry-color-hover
		&--low-gap
			background-color: #79b367
			border-color: #5ba044
			&:hover
				background-color: #6ea75c
				border-color: #579842
		&--disabled, &--disabled:hover
			background-color: #b7b1b1
			border-color: #a79797
	
	&__center
		position: relative
		top: 50%
		transform: translateY(-50%)
		display: block
		padding: 0 $skedtape-entry-padding
	
	&__grid
		display: flex
		align-items: stretch
		list-style: none
		margin: 0
		padding: 0
		position: absolute
		left: 0
		right: 0
		top: 0
		bottom: 0
		> li
			display: block
			margin: 0
			padding: 0
			background-image: linear-gradient(to right,$skedtape-grid-color 1px,$skedtape-grid-color 1px), linear-gradient(to right,$skedtape-grid-color 1px,$skedtape-grid-color 1px), linear-gradient(to right,$skedtape-grid-color 1px,$skedtape-grid-color 1px), linear-gradient(to right,$skedtape-grid-color 1px,$skedtape-grid-color 1px), linear-gradient(to right,$skedtape-grid-color 1px,$skedtape-grid-color 1px)
			background-size: 1px 100%, 1px 100%, 1px 100%, 1px 100%, 1px 100%
			background-repeat: no-repeat
			background-position: 0 0, 100% 0, 25% 0, 50% 0, 75% 0
			min-width: $skedtape-hour-column-width
			width: $skedtape-hour-column-width

	&__indicator
		position: absolute
		z-index: 3
		top: 0
		bottom: 0
		border-left: 1px solid #e43828

	&__dates
		display: flex
		align-items: stretch
		width: 100%
		list-style: none
		margin: 0
		padding: 0

	&__date
		display: block
		margin: 0
		padding: 0
		height: $skedtape-dates-height
		line-height: $skedtape-dates-height
		font-size: 13px
		font-weight: bold
		text-align: center
		overflow: hidden
		white-space: nowrap
		background: #e0e0e0
		&:nth-child(odd)
			background: #eee
		&:before, &:after
			content: attr(title)
			display: block
			width: calc(50% - 20px)
			height: inherit
			overflow: hidden
			text-overflow: ellipsis
		&:before
			float: left
			margin-left: 15px
			text-align: left
		&:after
			float: right
			margin-right: 15px
			text-align: right
		&--short:before
			float: none
			width: auto
			margin: 0 5px
			text-align: center
		&--short:after
			display: none
